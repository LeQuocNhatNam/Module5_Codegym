<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Facility List</title>
</head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<body>
<div th:replace="layout::navbar"></div>
<div>
    <h2 style="text-align: center">Facility List</h2>
    <a th:href="@{/facility/create}" class="btn btn-primary">Create Facility</a>
    <h3 style="color: blue" th:text="${success}"></h3>
    <form method="get" th:action="@{/facility}">
        <input type="text" name="name" placeholder="name" th:value="${name}">
        <select name="facilityTypeId">
            <option th:value="0">All</option>
            <option th:each="facilityType:${facilityTypeList}" th:text="${facilityType.name}"
                    th:selected="${facilityTypeId == facilityType.getId()}"
                    th:value="$x{facilityType.id}"></option>
        </select>
        <button class="btn btn-primary">Search</button>
    </form>
    <table class="table table-stripped">
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Area</th>
            <th>Cost</th>
            <th>Facility Type</th>
            <th>Rent Type</th>
            <th>Standard Room</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
        <tr th:each="facility,status:${facilityPage}">
            <td th:text="${status.count}"></td>
            <td th:text="${facility.name}"></td>
            <td th:text="${facility.area}"></td>
            <td th:text="${facility.cost}"></td>
            <td th:text="${facility.facilityType.name}"></td>
            <td th:text="${facility.rentType.name}"></td>
            <td th:text="${facility.standardRoom}"></td>
            <td><a class="btn btn-secondary" th:href="@{/facility/edit(id=${facility.getId()})}">Edit</a></td>
            <td>
                <button th:attr="onclick=|info('${facility.getId()}','${facility.name}')|" type="button"
                        class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#delete-facility">
                    Delete
                </button>
            </td>
        </tr>
    </table>
    <div>
        <span th:if="${facilityPage.hasPrevious()}">
            <a th:href="@{/facility(name=${name},facilityTypeId=${facilityTypeId},page=${facilityPage.number}-1)}"
               th:text="Previous"></a>
        </span>
        <span th:text="${facilityPage.number+1} + '/' + ${facilityPage.totalPages}"></span>
        <span th:if="${facilityPage.hasNext()}">
            <a th:href="@{/facility(name=${name},facilityTypeId=${facilityTypeId},page=${facilityPage.number + 1})}"
               th:text="Next"></a>
        </span>
    </div>
    <div th:replace="layout::delete-modal"></div>
</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
<script>
    function info(id, name) {
        document.getElementById("facility-modal-body").innerText = "are you sure to delete " + name;
        document.getElementById("idDeleteFacility").value = id;
    }
</script>
</html>
